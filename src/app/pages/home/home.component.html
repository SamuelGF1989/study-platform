<header class="header" *ngIf="currentUser$ | async as user">
  <button class="hamburger-btn" (click)="toggleMenu()">â˜°</button>

  <div class="avatar" (click)="toggleLogoutCard()">
    <img
      [src]="user.photoURL ? user.photoURL : defaultAvatar"
      alt="Avatar"
      class="avatar-image"
    />
  </div>

  <mat-card *ngIf="showLogoutCard" class="logout-card" (click)="$event.stopPropagation()">
    <button mat-button (click)="logout()">Cerrar sesiÃ³n</button>
  </mat-card>
</header>

<!-- MenÃº hamburguesa lateral -->
<nav class="side-menu" [class.open]="menuOpen">
  <ul>
    <li><a (click)="router.navigate(['/home']); closeMenu()">Home</a></li>
    <li><a (click)="router.navigate(['/videos']); closeMenu()">Videos</a></li>
    <li><a (click)="router.navigate(['/resources']); closeMenu()">Recursos</a></li>
  </ul>
</nav>

<!-- Overlay para cerrar menÃº cuando estÃ¡ abierto -->
<div *ngIf="menuOpen" class="overlay" (click)="closeMenu()"></div>

<main class="main-content">
  <div class="user-greeting" *ngIf="currentUser$ | async as user">
    <h1>Hola, {{ user.displayName || 'Usuario' }} ðŸ’¤ Â¿Listo para aprender algo nuevo hoy?</h1>
  </div>

  <!-- SecciÃ³n Consejo del dÃ­a -->
  <section class="daily-advice">
    <mat-card>
      <h3>Consejo del dÃ­a ðŸ’¡</h3>
      <p>{{ consejoDelDia }}</p>
      <button mat-raised-button color="accent" (click)="mostrarConsejoAleatorio()">
        Otro consejo
      </button>
    </mat-card>
  </section>

  <!-- Progreso general -->
<section class="general-progress" *ngIf="lessons.length > 0">
  <mat-card class="progress-card">
    <h3>Progreso General ðŸ“Š</h3>
    <mat-progress-bar
      mode="determinate"
      [value]="progresoGeneral"
      color="accent"
      class="custom-progress-bar">
    </mat-progress-bar>
    <p class="progress-label">{{ progresoGeneral | number:'1.0-0' }}% completado en total</p>
  </mat-card>
</section>


  <section class="lessons-grid">
    <div *ngFor="let lesson of lessons" class="lesson-card">
      <img [src]="'assets/quiz.png'" alt="{{lesson.title}}" class="lesson-image" />
      <h2 class="lesson-title">{{ lesson.title }}</h2>
      <div class="progress-bar-container">
        <div class="progress-bar" [style.width.%]="lesson.progress"></div>
      </div>
      <p class="progress-text">{{ lesson.progress }}% completado</p>
      <button mat-raised-button color="primary" (click)="viewLesson(lesson.id)">
        Ver lecciÃ³n
      </button>
    </div>
  </section>
</main>
